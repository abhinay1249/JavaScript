<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissors - Functions</title>
  </head>
  <body>
    <p>Rock Paper Scissors</p>
    <button onclick="playGame('rock');">Rock</button>

    <button onclick="playGame('paper');">Paper</button>

    <button onclick="playGame('scissors');">Scissors</button>

    <button onclick="resetScore()"> Reset Score</button>

    <script>

        let score = JSON.parse(localStorage.getItem('score')) || {
            wins:0,loses:0,tie:0
        };

        // console.log(localStorage.getItem('message'));
        /*
        if(!score){
            wins:0,
            loses:0,
            tie:0
        }
        */

        function resetScore(){
            score.wins = 0;
            score.loses = 0;
            score.tie = 0;

            localStorage.removeItem('score');

            alert(`Score:- Won: ${score.wins} Lost: ${score.loses} Tie: ${score.tie}`);

        }

        function playGame(playerMove){
          const computerMove = pickComputerMove();

          let result = '';

          //  ------------ Logic for Rock ------------------

          if(playerMove ==='rock'){

              if (computerMove === 'rock') {
                result = 'Tie';
              } else if (computerMove === 'paper') {
                result = 'You lose';
              } else if (computerMove === 'scissors') {
                result = 'You win';
              }
          }

          //  ------------ Logic for Paper ------------------

          else if(playerMove ==='paper'){
            
              if (computerMove === 'rock') {
                result = 'You win';
              } else if (computerMove === 'paper') {
                result = 'Tie';
              } else if (computerMove === 'scissors') {
                result = 'You lose';
              }

          }

          //  ------------ Logic for Scissors ------------------

          else if(playerMove ==='scissors'){

            if (computerMove === 'rock') {
              result = 'You lose';
            } else if (computerMove === 'paper') {
              result = 'You win';
            } else if (computerMove === 'scissors') {
              result = 'Tie';
            }

          }

          if(result === 'You win') score.wins+=1;
          else if(result === 'You lose') score.loses+=1;
          else if(result === 'Tie') score.tie+=1;

        // ---------------- Local Storage ----------------------

        // localStorage.setItem('message','hello world!');
        localStorage.setItem('score',JSON.stringify(score));

          alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result}
Scores:- Won: ${score.wins} Lost: ${score.loses} Tie: ${score.tie}`);
        }



        function pickComputerMove(){
            const randomNumber = Math.random();

            let computerMove = '';

            if (randomNumber >= 0 && randomNumber < 1 / 3) {
              computerMove = 'rock';
            } else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3) {
              computerMove = 'paper';
            } else if (randomNumber >= 2 / 3 && randomNumber < 1) {
              computerMove = 'scissors';
            }
          return computerMove;
        }

        
    </script>
  </body>
</html>